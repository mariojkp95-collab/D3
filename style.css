:root{
  --bg:#0b1224; --panel:#0f172a; --stroke:#1f2a44; --text:#e5e7eb; --muted:#9ca3af;
  --tileA:#0e2a1e; --tileB:#123022; --block:#15223b;
  --player:#3b82f6; --enemy:#ef4444; --coin:#facc15; --shadow:#0006; --hp:#10b981; --hpBack:#1f2937;
  --accent:#7c3aed;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto}
header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--panel);border-bottom:1px solid var(--stroke)}
header .muted{color:var(--muted);margin-left:8px}
header button{background:#26325a;color:#fff;border:1px solid #31406e;border-radius:8px;padding:6px 10px;cursor:pointer}
header button:hover{filter:brightness(1.05)}
main{max-width:1000px;margin:14px auto;padding:12px;background:var(--panel);border:1px solid var(--stroke);border-radius:12px}
#game{display:block;width:100%;height:auto;border-radius:10px;border:1px solid var(--stroke);background:#0a1630;image-rendering:pixelated;touch-action:manipulation}
.help{margin:.6rem 0 0;color:#a1a1aa}
.help .coin{color:var(--coin);font-weight:700}
.help .potion{color:#a78bfa;font-weight:700}
#status{margin-top:8px;color:var(--muted)}

/* Bottone flottante (mobile) */
.fab{
  position: fixed;
  right: 14px;
  bottom: 14px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 1px solid #31406e;
  background: var(--accent);
  color: #fff;
  font-size: 24px;
  line-height: 56px;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
  z-index: 20;
}
.fab:active{ transform: scale(0.98); }
@media (hover:hover){ .fab:hover{ filter: brightness(1.05); } }

/* Quest panel */
.quest{
  position: fixed;
  top: 16px;
  right: 16px;
  width: 280px;
  background: #0f172a;
  border: 1px solid #1f2a44;
  border-radius: 10px;
  box-shadow: 0 12px 28px rgba(0,0,0,.35);
  z-index: 30;
}
.hidden{ display: none; }
.q-header{
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 10px;border-bottom:1px solid #1f2a44;font-weight:600
}
.q-close{
  width:28px;height:28px;border-radius:6px;border:1px solid #31406e;background:#26325a;color:#fff;font-size:16px;cursor:pointer
}
.q-body{ padding:10px; }
.q-title{ font-weight:700; margin-bottom:6px; }
.q-desc{ color:#c7cad1; margin-bottom:8px; }
.q-row{ display:flex; justify-content:space-between; align-items:center; margin:8px 0; }
.progress{
  width:100%; height:10px; background:#0b1224; border:1px solid #1f2a44; border-radius:6px; overflow:hidden;
}
.progress > div{ height:100%; background:var(--accent); width:0%; }
.q-reward{ color:#d1fae5; margin-top:6px; font-size:13px; }
.q-claim{
  width:100%; margin-top:10px; padding:8px 10px; border:1px solid #31406e; background:#2563eb; color:#fff; border-radius:8px; cursor:pointer;
}
.q-claim:disabled{ background:#1f2a44; color:#9aa0ad; cursor:not-allowed; }
